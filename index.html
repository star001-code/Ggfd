<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ghadeer Accounts | ØºØ¯ÙŠØ± Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª â€” Login Edition</title>
  <link rel="stylesheet" href="assets/css/theme.css">
  <link rel="manifest" href="manifest.json">
  <script defer src="assets/js/crypto.js"></script>
  <script defer src="assets/js/app.js"></script>
  <style>
    @media print{
      body{background:#fff;color:#000}
      header,#loginGate,.drawer .actions #d_close,.drawer .actions #d_export,.no-print{display:none!important}
      .drawer{display:block!important; position:static; background:#fff}
      .drawer-panel{inset:auto; width:100%; border:0; padding:0}
      .print-header{display:flex!important; gap:12px; align-items:center; padding:12px 0; border-bottom:1px solid #ccc; margin-bottom:12px}
      .print-logo{width:80px; height:80px; object-fit:cover; border-radius:6px}
      .print-title{display:flex; flex-direction:column; gap:4px}
      .print-title h1{margin:0; font-size:18px}
      .print-meta{font-size:12px; color:#333}
      table{font-size:12px}
      thead th, tbody td{border-color:#ddd!important}
      .print-footer{display:block!important; margin-top:10px; font-size:11px; color:#555; text-align:center}
    }
    .print-header,.print-footer{display:none}
  </style>
</head>
<body>
  <header class="app-header">
    <div class="container">
      <div class="brand">
        <img src="assets/icons/truck.png" alt="truck" class="brand-truck"/>
        <div class="brand-texts">
          <h1>Ghadeer Accounts | ØºØ¯ÙŠØ± Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h1>
          <div class="muted">Bilingual â€¢ Secure Local â€¢ PWA â€¢ PDF Statements</div>
        </div>
      </div>
      <nav id="tabs" class="hidden">
        <button class="tab active" data-tab="clients">ğŸ‘¥ Clients / Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
        <button class="tab" data-tab="transactions">ğŸ§¾ Invoices & Payments / ÙÙˆØ§ØªÙŠØ± ÙˆØ¯ÙØ¹Ø§Øª</button>
        <button class="tab" data-tab="expenses">ğŸ› ï¸ Expenses / Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
        <button class="tab" data-tab="summary">ğŸ“Š Company Summary / Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø±ÙƒØ©</button>
        <button class="tab" data-tab="settings">âš™ï¸ Settings / Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        <button class="tab logout no-print" id="logoutBtn">ğŸšª Logout / ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
      </nav>
    </div>
  </header>

  <section id="loginGate" class="login-gate">
    <div class="login-card glass">
      <img src="assets/icons/brand-card.jpg" alt="Ghadeer Logistics Trans" class="login-logo"/>
      <h2>Login / ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <p class="muted small">Your data stays on this device (AES-GCM encrypted). Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¨Ù‚Ù‰ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².</p>
      <div class="form">
        <label>ğŸ‘¤ Username / Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
        <input id="lg_user" placeholder="admin" autocomplete="username"/>
        <label>ğŸ”‘ Password / ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input id="lg_pass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password"/>
        <label class="remember"><input type="checkbox" id="lg_rem"> Remember me / ØªØ°ÙƒÙ‘Ø±Ù†ÙŠ</label>
        <div class="actions">
          <button class="btn primary" id="loginBtn">Login / Ø¯Ø®ÙˆÙ„</button>
        </div>
        <div id="lg_error" class="error hidden">âš ï¸ Wrong username or password. Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.</div>
      </div>
      <div class="login-footer muted small">Â© 2025 Ghadeer Logistics Trans</div>
    </div>
    <div class="bg-blur"></div>
  </section>

  <main class="container">
    <section id="app" class="hidden">
      <section id="clients" class="tab-pane">
        <div class="grid">
          <div class="card">
            <h2>ğŸ‘¥ Add Client / Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</h2>
            <div class="form-grid">
              <div><label>Name / Ø§Ù„Ø§Ø³Ù…</label><input id="c_name" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø±ÙƒØ© Ø´Ù…Ø§Ù„ ÙƒØ±Ø¯Ø³ØªØ§Ù†"/></div>
              <div><label>Phone / Ø§Ù„Ù‡Ø§ØªÙ</label><input id="c_phone" placeholder="07xxxxxxxx"/></div>
              <div><label>City / Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label><input id="c_city" placeholder="Ø£Ø±Ø¨ÙŠÙ„"/></div>
              <div class="actions" style="align-items:end">
                <button class="btn primary" id="addClientBtn">â• Add / Ø¥Ø¶Ø§ÙØ©</button>
                <button class="btn ghost" id="exportClientsBtn">â¬‡ï¸ Export / ØªØµØ¯ÙŠØ±</button>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="toolbar">
              <div class="search" style="flex:1"><label>Search / Ø¨Ø­Ø«</label><input id="clientSearch" placeholder="Name, Phone..."/></div>
              <div><label>Sort / ÙØ±Ø²</label><select id="clientSort">
                <option value="name">By Name / Ø§Ù„Ø§Ø³Ù…</option>
                <option value="balanceDesc">Balance â†“ / Ø§Ù„Ø±ØµÙŠØ¯ (ØªÙ†Ø§Ø²Ù„ÙŠ)</option>
                <option value="balanceAsc">Balance â†‘ / Ø§Ù„Ø±ØµÙŠØ¯ (ØªØµØ§Ø¹Ø¯ÙŠ)</option>
                <option value="invoices">Operations / Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</option>
              </select></div>
            </div>
            <div style="margin-top:10px; overflow:auto">
              <table>
                <thead><tr><th>Client / Ø§Ù„Ø¹Ù…ÙŠÙ„</th><th>Phone / Ø§Ù„Ù‡Ø§ØªÙ</th><th>City / Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th><th>Ops / Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th><th>Balance / Ø§Ù„Ø±ØµÙŠØ¯</th><th class="right">Options / Ø®ÙŠØ§Ø±Ø§Øª</th></tr></thead>
                <tbody id="clientRows"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="transactions" class="tab-pane hidden">
        <div class="grid">
          <div class="card">
            <h2>ğŸ§¾ Add Invoice / Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø©</h2>
            <div class="form-grid">
              <div><label>Client / Ø§Ù„Ø¹Ù…ÙŠÙ„</label><select id="t_client"></select></div>
              <div><label>Description / Ø§Ù„ÙˆØµÙ</label><input id="t_desc" placeholder="Service description"/></div>
              <div><label>Amount / Ø§Ù„Ù…Ø¨Ù„Øº</label><input id="t_amount" type="number" step="0.01" placeholder="0"/></div>
              <div><label>Date / Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input id="t_date" type="date"/></div>
              <div class="actions" style="grid-column:1/-1"><button class="btn primary" id="addInvoiceBtn">ğŸ§¾ Add / Ø¥Ø¶Ø§ÙØ©</button></div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ’¸ Record Payment / ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹Ø©</h2>
            <div class="form-grid">
              <div><label>Client / Ø§Ù„Ø¹Ù…ÙŠÙ„</label><select id="p_client"></select></div>
              <div><label>Description / Ø§Ù„ÙˆØµÙ</label><input id="p_desc" placeholder="e.g. Cash payment"/></div>
              <div><label>Amount / Ø§Ù„Ù…Ø¨Ù„Øº</label><input id="p_amount" type="number" step="0.01" placeholder="0"/></div>
              <div><label>Date / Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input id="p_date" type="date"/></div>
              <div class="actions" style="grid-column:1/-1"><button class="btn primary" id="addPaymentBtn">ğŸ’¸ Add / Ø¥Ø¶Ø§ÙØ©</button></div>
            </div>
            <p class="muted">Payments reduce client balance and are not company expenses. Ø§Ù„Ø¯ÙØ¹Ø§Øª ØªÙÙ‚Ù„Ù„ Ø±ØµÙŠØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆÙ„ÙŠØ³Øª Ù…ØµØ±ÙˆÙÙ‹Ø§.</p>
          </div>
        </div>
      </section>

      <section id="expenses" class="tab-pane hidden">
        <div class="grid">
          <div class="card">
            <h2>ğŸ› ï¸ Add Expense / Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</h2>
            <div class="form-grid">
              <div><label>Description / Ø§Ù„ÙˆØµÙ</label><input id="e_desc" placeholder="Fuel, Maintenance, Salaries..."/></div>
              <div><label>Amount / Ø§Ù„Ù…Ø¨Ù„Øº</label><input id="e_amount" type="number" step="0.01" placeholder="0"/></div>
              <div><label>Date / Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input id="e_date" type="date"/></div>
              <div class="actions" style="grid-column:1/-1"><button class="btn primary" id="addExpenseBtn">ğŸ› ï¸ Add / Ø¥Ø¶Ø§ÙØ©</button></div>
            </div>
          </div>
          <div class="card">
            <h2>ğŸ“œ Expenses Log / Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h2>
            <div style="overflow:auto">
              <table>
                <thead><tr><th>Date / Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Description / Ø§Ù„ÙˆØµÙ</th><th>Amount / Ø§Ù„Ù…Ø¨Ù„Øº</th><th class="right">Options / Ø®ÙŠØ§Ø±Ø§Øª</th></tr></thead>
                <tbody id="expenseRows"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="summary" class="tab-pane hidden">
        <div class="grid">
          <div class="card">
            <h2>ğŸ“Š Summary / Ù…Ù„Ø®Øµ</h2>
            <div class="stats">
              <div class="stat"><small>Total Invoices / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</small><h3 id="s_totalInvoices">-</h3></div>
              <div class="stat"><small>Total Payments / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙØ¹Ø§Øª</small><h3 id="s_totalPayments">-</h3></div>
              <div class="stat"><small>Total Expenses / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</small><h3 id="s_totalExpenses">-</h3></div>
              <div class="stat"><small>Net Profit / ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</small><h3 id="s_netProfit">-</h3></div>
            </div>
            <p class="muted">Profit = Invoices âˆ’ Expenses. Ø§Ù„Ø±Ø¨Ø­ = Ø§Ù„ÙÙˆØ§ØªÙŠØ± âˆ’ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª.</p>
          </div>
          <div class="card">
            <h2>ğŸ† Top Clients / Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
            <div style="overflow:auto">
              <table>
                <thead><tr><th>Client / Ø§Ù„Ø¹Ù…ÙŠÙ„</th><th>#Invoices / Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</th><th>Total / Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th><th>Balance / Ø§Ù„Ø±ØµÙŠØ¯</th></tr></thead>
                <tbody id="topClientsRows"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="settings" class="tab-pane hidden">
        <div class="card">
          <h2>âš™ï¸ Settings / Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
          <div class="form-grid">
            <div><label>Currency (code) / Ø§Ù„Ø¹Ù…Ù„Ø©</label><input id="currencyCode" placeholder="USD"/></div>
            <div><label>Locale / ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…</label><select id="localeSelect">
              <option value="en-US">en-US</option>
              <option value="ar">ar</option>
              <option value="ar-SA">ar-SA</option>
            </select></div>
            <div class="actions" style="grid-column:1/-1">
              <button class="btn primary" id="saveSettingsBtn">ğŸ’¾ Save / Ø­ÙØ¸</button>
              <button class="btn" id="exportAllBtn">â¬‡ï¸ Export Encrypted Backup / ØªØµØ¯ÙŠØ± Ù†Ø³Ø®Ø© Ù…Ø´ÙÙ‘Ø±Ø©</button>
            </div>
          </div>
        </div>
      </section>
    </section>
  </main>

  <div class="drawer" id="drawer">
    <div class="drawer-panel">
      <div class="print-header">
        <img src="assets/icons/brand-card.jpg" class="print-logo" alt="Ghadeer"/>
        <div class="print-title">
          <h1>Customer Statement / ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø¹Ù…ÙŠÙ„</h1>
          <div class="print-meta" id="printMeta"></div>
        </div>
      </div>
      <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; position:sticky; top:0; background:#0b1224; padding-bottom:10px">
        <div>
          <h2 id="d_title" style="margin:0">Statement / ÙƒØ´Ù Ø­Ø³Ø§Ø¨</h2>
          <div class="muted" id="d_subtitle"></div>
        </div>
        <div class="actions">
          <button class="btn" id="d_print">ğŸ–¨ï¸ Print PDF / Ø·Ø¨Ø§Ø¹Ø© PDF</button>
          <button class="btn" id="d_export">â¬‡ï¸ Export JSON / ØªØµØ¯ÙŠØ±</button>
          <button class="btn" id="d_close">âœ–ï¸ Close / Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
      </div>
      <div class="toolbar" style="margin-top:8px">
        <div class="search" style="flex:1"><label>Search / Ø¨Ø­Ø«</label><input id="d_search" placeholder="Filter by description..."/></div>
        <div><label>Range / Ø§Ù„Ù…Ø¯Ø©</label><select id="d_range">
          <option value="all">All time / ÙƒÙ„ Ø§Ù„ÙˆÙ‚Øª</option><option value="30">Last 30 days / Ø¢Ø®Ø± 30 ÙŠÙˆÙ…</option><option value="90">Last 90 days / Ø¢Ø®Ø± 90 ÙŠÙˆÙ…</option><option value="365">Last year / Ø¢Ø®Ø± Ø³Ù†Ø©</option>
        </select></div>
      </div>
      <div style="margin-top:10px; overflow:auto">
        <table>
          <thead><tr><th>Date / Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Details / Ø§Ù„Ø¨ÙŠØ§Ù†</th><th>Type / Ø§Ù„Ù†ÙˆØ¹</th><th>Amount / Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Balance / Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th><th class="right no-print">Options / Ø®ÙŠØ§Ø±Ø§Øª</th></tr></thead>
          <tbody id="d_rows"></tbody>
        </table>
      </div>
      <div class="print-footer">Generated by Ghadeer Accounts â€“ Ghadeer Logistics Trans Â© 2025</div>
    </div>
  </div>
</body>
</html>
